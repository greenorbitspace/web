---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import HeroSection from '../../components/HeroSection.astro';
import TrainingList from '../../components/TrainingList.jsx';
import { getCollection } from 'astro:content';

// Correct top-level await
let trainings = await getCollection('training');

// Only include trainings with a title
trainings = trainings.filter(tr => tr.data.title);
---
<Layout title="Training Workshops" description="Explore sustainable marketing and space sector training courses offered by Green Orbit Digital.">
  <Header></Header>

  <main class="py-12 max-w-6xl mx-auto px-4">
    <HeroSection
      title="Training Workshops"
      description="Explore our range of sustainable marketing and space sector training options, from webinars to masterclasses."
    ></HeroSection>

    {trainings.length > 0 ? (
      <TrainingList trainings={trainings} />
    ) : (
      <p class="text-center text-gray-500 mt-6">
        No training sessions are currently available. Please check back later.
      </p>
    )}
  </main>

  <Footer></Footer>
</Layout>