---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import HeroSection from '../components/HeroSection.astro';
import ToolsList from '../components/ToolsList.jsx';
import InteractiveMapWrapper from '../components/InteractiveMapWrapper.jsx';
import tools from '../data/tools.js';

// Sort tools alphabetically
const sortedTools = tools.slice().sort((a, b) => a.name.localeCompare(b.name));

// Prepare markers for the map (only tools with lat/lng)
const mapMarkers = sortedTools
  .filter(t => t.lat && t.lng)
  .map(t => ({ lat: t.lat, lng: t.lng, label: t.name }));
---

<Layout
  title="Tools"
  description="Explore the digital tools, platforms, and resources used for sustainable marketing and space sector innovation."
>
  <Header />

  <main class="py-12 max-w-6xl mx-auto px-4">

    <!-- Hero Section -->
    <HeroSection 
      title="Tools"
      description="Explore the digital tools, platforms, and resources we use and recommend for sustainable marketing and space industry innovation."
    />

    <!-- Tools List Section -->
    <section class="py-12 bg-white dark:bg-secondary-500">
      <ToolsList client:load tools={sortedTools} />
    </section>

    <!-- Tools Map Section -->
    {mapMarkers.length > 0 && (
      <section class="py-12 bg-white dark:bg-secondary-500">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Tool Locations</h2>
        <InteractiveMapWrapper markers={mapMarkers} />
      </section>
    )}

    <!-- Developer / API Access Section -->
    <section class="py-16 bg-white dark:bg-secondary-500">
      <div class="border-t border-gray-200 dark:border-gray-700 pt-16">
        <div class="grid md:grid-cols-2 gap-12 items-center">

          <!-- Text Content -->
          <div>
            <span class="inline-block px-4 py-1 rounded-full bg-secondary-100 dark:bg-accent-500 text-secondary-600 dark:text-white font-medium text-sm mb-4">
              Developer Access
            </span>

            <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
              Custom Integrations & API Access
            </h2>

            <p class="text-gray-600 dark:text-white mb-6">
              Build dashboards, integrate with legacy systems, and connect to your data securely. Our API provides documented endpoints, sandbox access, and automation hooks.
            </p>

            <!-- Features List -->
            <div class="space-y-4 mb-8">
              {["RESTful API with OAuth 2.0", "Webhooks for automated updates", "Developer sandbox and testing environment"].map(feature => (
                <div class="flex items-start">
                  <svg class="w-5 h-5 text-green-500 mt-1 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7" />
                  </svg>
                  <p class="text-gray-600 dark:text-white">{feature}</p>
                </div>
              ))}
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-4">
              <a href="#" class="btn-primary">API Docs</a>
              <a href="#" class="btn-secondary">Contact Support</a>
            </div>
          </div>

          <!-- Code Block Example -->
          <div class="rounded-lg overflow-hidden shadow-xl">
            <div class="bg-gray-900 text-white p-4 font-mono text-sm">
              <div class="flex items-center mb-4">
                <div class="w-3 h-3 rounded-full bg-red-500 mr-2"></div>
                <div class="w-3 h-3 rounded-full bg-yellow-500 mr-2"></div>
                <div class="w-3 h-3 rounded-full bg-green-500"></div>
              </div>
              <pre class="text-green-400">
# Example API Request
curl -X GET \
  https://api.greenorbit.digital/v1/metrics \
  -H 'Authorization: Bearer YOUR_API_KEY'
              </pre>
            </div>
          </div>

        </div>
      </div>
    </section>

  </main>

  <Footer />
</Layout>