---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import HeroSection from "../../components/HeroSection.astro";
import EventsList from "../../components/EventFilters.jsx";

let preRenderedEvents = [];

try {
  const eventsImport = await import("../../data/events.json");
  preRenderedEvents = Array.isArray(eventsImport.default) ? eventsImport.default : [];
} catch (err) {
  console.warn("Failed to load events.json:", err);
  preRenderedEvents = [];
}
---

<Layout title="Upcoming Events">
  <Header />

  <main class="py-12 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <HeroSection
      title="Upcoming Events"
      description="Discover all space, sustainability, and marketing events in our orbit"
    />

    <!-- Pass a guaranteed array -->
    <EventsList preRenderedEvents={preRenderedEvents} client:load />
  </main>

  <Footer />
</Layout>