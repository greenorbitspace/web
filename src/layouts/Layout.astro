---
import '../styles/global.css';
import '../styles/transitions.css';
import GlobalSchema from '../components/Schema/GlobalSchema.astro';
import Seo from '../components/Seo.astro';
import Analytics from '../components/Analytics.astro';
import CookieBanner from '../components/CookieBanner.astro';

export interface Props {
  title: string;
  description?: string;
  ogImage?: string;
  canonical?: string;
  twitter?: {
    title?: string;
    description?: string;
    image?: string;
  };
}

const { title, description, ogImage, canonical, twitter } = Astro.props;
---

<!DOCTYPE html>
<html lang="en" class="scroll-smooth" 
      x-data="{ darkMode: localStorage.theme === 'dark' || (!localStorage.theme && window.matchMedia('(prefers-color-scheme: dark)').matches) }"
      x-bind:class="{ 'dark': darkMode }">

  <head>
    <!-- SEO meta tags -->
    <Seo 
      title={title} 
      description={description} 
      ogImage={ogImage} 
      canonical={canonical} 
      twitter={twitter} 
    />
    {Astro.head}

    <!-- Analytics tracking -->
    <Analytics
      gtmId={import.meta.env.PUBLIC_GTM_ID}
      ga4Id={import.meta.env.PUBLIC_GA4_ID}
      hubspotId={import.meta.env.PUBLIC_HUBSPOT_ID}
      hotjarId={import.meta.env.PUBLIC_HOTJAR_ID}
      hotjarVersion={import.meta.env.PUBLIC_HOTJAR_VERSION}
      brevoSiteId={import.meta.env.PUBLIC_BREVO_SITE_ID}
      ticketTailorTracking={import.meta.env.PUBLIC_TICKET_TAILOR}
    />

    <!-- Start of HubSpot Embed Code -->
  <script type="text/javascript" id="hs-script-loader" async defer src="//js-eu1.hs-scripts.com/143471159.js"></script>
  <!-- End of HubSpot Embed Code -->

    <!-- Alpine.js for interactivity and dark mode -->
    <script type="module" src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  </head>

  <body class="antialiased bg-white dark:bg-primary-500 text-secondary-900 dark:text-secondary-100 transition-colors duration-300">
    
    <!-- Main page content -->
    <main id="page-wrapper" class="page-wrapper" role="main" tabindex="-1">
      <slot />
    </main>

    <!-- Global structured data / JSON-LD -->
    <GlobalSchema />

    <!-- Cookie consent banner -->
    <CookieBanner />
  </body>
</html>